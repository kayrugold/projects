<div class="rookery-domain">
    <div class="dispatch-beacon">
    <span class="beacon-light"></span>
    <span class="beacon-text" id="live-beacon-text">
        <strong>üü¢ BEACON ACTIVE:</strong> Fetching latest transmission...
    </span>
    <button onclick="initRookeryBeacon()" class="icon-btn" style="margin-left: auto; border: none; background: transparent; color: #34d399; cursor: pointer;" title="Refresh Transmission">
        <span style="font-size: 1.2rem;">‚Üª</span>
    </button>
</div>

    <h1 class="page-title" style="border-bottom-color: #333;">The Rookery</h1>

    <div class="rookery-bleed">
        <div class="gallery-grid masonry-mode">

        <div class="item-card notebook-paper">
            <h3 class="notebook-title">Testing Directives</h3>
            <ol class="notebook-list" style="padding-left: 25px;">
                <li><strong>Step 1: Get Clearance.</strong> Join the Discord Guild Hall using the button below.</li>
                <li><strong>Step 2: Bypass the Airlock.</strong> Answer the Discord onboarding question to prove you are human. This grants you the <em>Elite Raven</em> security badge.</li>
                <li><strong>Step 3: Enter the Vault.</strong> With your new badge, the hidden <code>#the-watch-roster</code> channel will appear in Discord. Go there to grab the secure Google Play testing links.</li>
                <li><strong>Step 4: The 14-Day Watch.</strong> Open Factor Hunter every single day. Tap the Ledger below to mark your streak, and use the Bellows to dispatch bug reports.</li>
            </ol>
            
            <div style="margin-top: 15px; margin-bottom: 10px; text-align: center;">
                <a href="https://discord.gg/2RtH68T9fn" target="_blank" class="button" style="text-decoration: none; padding: 10px 15px; background: #333; color: #fff; border-radius: 5px; font-weight: bold;">Enter the Guild Hall</a>
            </div>
            
            <div class="notebook-signature">- Andy</div>
        </div>

            <div class="item-card raven-card bounty-card">
                <h3 class="forge-title">üéØ The Bounty Board</h3>
                <p class="log-body">Help me hunt down specific fractures in the code. High priority targets.</p>

                <div class="bounty-target">
                    <div class="bounty-header">
                        <span class="bounty-status">ACTIVE BOUNTY</span>
                        <span class="bounty-reward">Reward: Discord Forge Master Role</span>
                    </div>
                    <h4 class="bounty-name">Memory Leak in the Lattice</h4>
                    <p class="bounty-desc">
                        <strong>Target:</strong> Gnomon Navigator v0.9.2<br>
                        <strong>Mission:</strong> Zoom past 250x scale and trace a 20-digit Cargo number. Report the exact moment the framerate drops so I can isolate the BigInt loop.
                    </p>
                </div>
            </div>

            <div class="item-card raven-card">
                <h3 class="forge-title">üß© The Daily Composite</h3>
                <p class="log-body">Today's target for the Factor Hunter. Can you break it?</p>
                <div class="daily-number" onclick="navigator.clipboard.writeText(this.innerText); alert('Target secured! Number copied to clipboard.');" style="cursor: pointer;" title="Tap to copy">
    8923749823749823749238749283749823749
</div>
                <p style="font-size: 0.8rem; color: #64748b; text-align: center; margin: 0;">Report factors in the <a href="https://discord.gg/WHhnBXpDSW" target="_blank" style="color: #fcd34d; text-decoration: none; font-weight: bold;">Guild Hall</a>.</p>
            </div>

            <div class="item-card raven-card">
                <h3 class="forge-title">‚öîÔ∏è The Anvil: Active Alloys</h3>
                <p class="log-body">Select a prototype below to begin stress testing.</p>

                <div class="alloy-list">
                    
                    <div class="alloy-item">
                        <div class="alloy-details">
                            <strong>Gnomon Navigator v0.9.2</strong>
                            <span>Mobile UI & Cargo Trace</span>
                        </div>
                        <button onclick="launchApp('./apps/gnomonnavigator0.0.6.html')" class="raven-btn mini-btn">LAUNCH</button>
                    </div>
                    
                    <div class="alloy-item" style="flex-direction: column; align-items: flex-start;">
                        <div class="alloy-details" style="margin-bottom: 10px;">
                            <strong>Factor Hunter v2.1.0</strong>
                            <span>BigInt Engine Stress & App Test</span>
                        </div>
                        <div class="alloy-btn-row">
                            <button onclick="launchApp('./apps/factorhunter0.0.0.html')" class="raven-btn mini-btn">WEB</button>
                            <button onclick="if(confirm('SYSTEM CHECK: Have you received clearance from the Discord Guild Hall first? If not, Google Play will reject this link. Proceed?')) window.open('https://play.google.com/store/apps/details?id=com.andysdevstudio.factorhunter', '_blank')" class="raven-btn mini-btn android-btn">ANDROID</button>
                        </div>
                    </div>

                </div>
            </div>

            <div class="item-card raven-card">
                <h3 class="forge-title">üìÖ The 14-Day Watch</h3>
                <p class="log-body">Google requires 20 testers for 14 continuous days. Tap a day to mark your attendance.</p>
                
                <div id="streak-grid" class="streak-grid-container raven-streak"></div>
                
                <div style="text-align: center; margin-top: 15px;">
                    <span class="badge" style="background: #fcd34d; color: #000; border:none; font-weight:bold;">ACTIVE TESTER</span>
                </div>
            </div>

        <div class="item-card raven-card plaque-card" id="watch-board-card">
    <h3 class="forge-title" style="color: #fcd34d !important;">üì° The Watch Board</h3>
    <p class="log-body" style="font-size: 0.85rem; margin-bottom: 15px;">
        Google requires <strong>20 testers</strong> active for <strong>14 continuous days</strong> before an app can go public. This is the mission board. Every recruit matters.
    </p>

    <!-- Tester Count Progress -->
    <div style="margin-bottom: 18px;">
        <div style="display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 6px;">
            <span style="font-family: 'Share Tech Mono', monospace; font-size: 0.75rem; color: #a1a1aa; letter-spacing: 2px; text-transform: uppercase;">Tester Roster</span>
            <span style="font-family: 'Share Tech Mono', monospace; font-size: 1rem; color: #fcd34d;" id="wb-tester-count">0 / 20</span>
        </div>
        <div style="background: #1a1a1a; border-radius: 2px; height: 8px; overflow: hidden; border: 1px solid #333;">
            <div id="wb-tester-bar" style="height: 100%; width: 0%; background: linear-gradient(90deg, #d4af37, #fcd34d); border-radius: 2px; transition: width 1s ease;"></div>
        </div>
    </div>

    <!-- Day Progress -->
    <div style="margin-bottom: 18px;">
        <div style="display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 6px;">
            <span style="font-family: 'Share Tech Mono', monospace; font-size: 0.75rem; color: #a1a1aa; letter-spacing: 2px; text-transform: uppercase;">Watch Duration</span>
            <span style="font-family: 'Share Tech Mono', monospace; font-size: 1rem; color: #fcd34d;" id="wb-day-count">Day 0 / 14</span>
        </div>
        <div style="background: #1a1a1a; border-radius: 2px; height: 8px; overflow: hidden; border: 1px solid #333;">
            <div id="wb-day-bar" style="height: 100%; width: 0%; background: linear-gradient(90deg, #374151, #6b7280); border-radius: 2px; transition: width 1s ease;"></div>
        </div>
        <p style="font-family: 'Share Tech Mono', monospace; font-size: 0.7rem; color: #52525b; margin: 6px 0 0 0; font-style: italic;" id="wb-day-note">
            The clock starts when tester quota is met.
        </p>
    </div>

    <!-- Status -->
    <div style="text-align: center; padding: 10px; background: rgba(0,0,0,0.3); border: 1px dashed #333; border-radius: 2px; margin-bottom: 15px;">
        <span style="font-family: 'Share Tech Mono', monospace; font-size: 0.75rem; color: #a1a1aa; letter-spacing: 2px; display: block; margin-bottom: 4px;">CURRENT STATUS</span>
        <span id="wb-status-text" style="font-family: 'Cinzel', serif; font-size: 1rem; color: #fcd34d; font-weight: bold;">RECRUITING</span>
    </div>

    <!-- CTA -->
    <p style="font-size: 0.8rem; color: #71717a; text-align: center; margin: 0 0 12px 0; font-style: italic;">
        Join the Discord. Your name goes on the plaque when the watch is complete.
    </p>
    <a href="https://discord.gg/2RtH68T9fn" target="_blank" style="text-decoration: none; display: block;">
        <button class="raven-btn highlight-btn" style="width: 100%;">‚öîÔ∏è ENLIST IN THE WATCH</button>
    </a>
</div>

<script>
// ==========================================
// WATCH BOARD ‚Äî configuration
// Update these two numbers manually as
// your real tester count and day count grow.
// ==========================================
(function() {
    const CURRENT_TESTERS = 0;   // <-- update this
    const CURRENT_DAY     = 0;   // <-- update this (0 = not started)
    const TESTER_GOAL     = 20;
    const DAY_GOAL        = 14;

    // Animate bars in after a short delay so the user sees the fill
    setTimeout(function() {
        const testerPct = Math.min((CURRENT_TESTERS / TESTER_GOAL) * 100, 100);
        const dayPct    = Math.min((CURRENT_DAY / DAY_GOAL) * 100, 100);

        const testerBar = document.getElementById('wb-tester-bar');
        const dayBar    = document.getElementById('wb-day-bar');
        const testerCount = document.getElementById('wb-tester-count');
        const dayCount    = document.getElementById('wb-day-count');
        const dayNote     = document.getElementById('wb-day-note');
        const statusText  = document.getElementById('wb-status-text');

        if (testerBar) testerBar.style.width = testerPct + '%';
        if (dayBar)    dayBar.style.width    = dayPct + '%';
        if (testerCount) testerCount.textContent = CURRENT_TESTERS + ' / ' + TESTER_GOAL;
        if (dayCount)    dayCount.textContent    = 'Day ' + CURRENT_DAY + ' / ' + DAY_GOAL;

        // Dynamic tester bar colour ‚Äî red when critically low, amber mid, gold when full
        if (testerBar) {
            if (CURRENT_TESTERS < 5) {
                testerBar.style.background = 'linear-gradient(90deg, #7f1d1d, #ef4444)';
            } else if (CURRENT_TESTERS < 15) {
                testerBar.style.background = 'linear-gradient(90deg, #92400e, #f59e0b)';
            } else {
                testerBar.style.background = 'linear-gradient(90deg, #d4af37, #fcd34d)';
            }
        }

        // Day bar only glows once the watch is actually running
        if (dayBar && CURRENT_DAY > 0) {
            dayBar.style.background = 'linear-gradient(90deg, #1e3a5f, #3b82f6)';
        }

        // Status label
        if (statusText) {
            if (CURRENT_TESTERS >= TESTER_GOAL && CURRENT_DAY >= DAY_GOAL) {
                statusText.textContent = 'WATCH COMPLETE';
                statusText.style.color = '#4ade80';
            } else if (CURRENT_TESTERS >= TESTER_GOAL && CURRENT_DAY > 0) {
                statusText.textContent = 'WATCH ACTIVE ‚Äî DAY ' + CURRENT_DAY;
                statusText.style.color = '#3b82f6';
            } else if (CURRENT_TESTERS >= TESTER_GOAL) {
                statusText.textContent = 'QUOTA MET ‚Äî AWAITING START';
                statusText.style.color = '#a3e635';
            } else {
                statusText.textContent = 'RECRUITING ‚Äî ' + (TESTER_GOAL - CURRENT_TESTERS) + ' NEEDED';
                statusText.style.color = '#fcd34d';
            }
        }

        // Day note
        if (dayNote) {
            if (CURRENT_DAY === 0 && CURRENT_TESTERS < TESTER_GOAL) {
                dayNote.textContent = 'The clock starts when tester quota is met.';
            } else if (CURRENT_DAY === 0) {
                dayNote.textContent = 'Quota met. Watch begins when testers open the app.';
            } else {
                const remaining = DAY_GOAL - CURRENT_DAY;
                dayNote.textContent = remaining + ' day' + (remaining !== 1 ? 's' : '') + ' until the gate clears.';
            }
        }

    }, 400);
})();
</script>

            <div class="item-card raven-card">
                <h3 class="forge-title">üõ†Ô∏è QA Arsenal</h3>
                <p class="log-body">Tester utilities for deep-diving the lattice.</p>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button onclick="toggleViewport()" class="raven-btn tool-btn">‚õ∂ TOGGLE MOBILE VIEWPORT</button>
                    <button onclick="snagErrorLog()" class="raven-btn tool-btn">üìã SNAG SYSTEM SPECS</button>
                </div>
            </div>

            <div class="item-card raven-card">
                <h3 class="forge-title">üêû Dispatch Bug Report</h3>
                <p class="log-body">Found a glitch in the matrix? Let me know exactly where it broke.</p>
                <select id="bugDest" class="raven-input">
                    <option value="email" selected>üì¨ Send to Andy via Email</option>
                    <option value="discord">üí¨ Send to Discord Guild</option>
                </select>
                <select id="bugProject" class="raven-input">
                    <option value="" disabled selected>Select Project...</option>
                    <option value="Gnomon Navigator">Gnomon Navigator</option>
                    <option value="Factor Hunter">Factor Hunter</option>
                    <option value="Website/PWA">The Website / PWA</option>
                </select>

                <select id="bugType" class="raven-input">
                    <option value="Bug">üêõ Bug / Crash</option>
                    <option value="UI">üé® Visual / UI Issue</option>
                    <option value="Idea">üí° Feature Idea</option>
                </select>

                <textarea id="bugMsg" class="raven-input" placeholder="Describe what happened..."></textarea>
                
                <button onclick="sendBugReport()" class="raven-btn highlight-btn">üöÄ LAUNCH REPORT</button>
            </div>

            <div class="item-card raven-card" style="border-left: 4px solid #5865F2;">
                <h3 class="forge-title">üí¨ The Guild Hall</h3>
                <p class="log-body">Join our Discord server to chat with other testers, see upcoming features, and get instant support.</p>
                <a href="https://discord.gg/WHhnBXpDSW" target="_blank" style="text-decoration: none;">
                    <button class="raven-btn discord-btn">OPEN COMMS (DISCORD)</button>
                </a>
            </div>

        </div>
    </div>
</div>
