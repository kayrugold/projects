<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #000; color: #00ff41; font-family: 'Courier New', monospace; padding: 15px; margin: 0; }
        #output { border: 1px solid #333; height: 400px; overflow-y: auto; padding: 10px; font-size: 13px; background: #050505; margin-bottom: 10px; }
        .input-group { display: flex; flex-direction: column; gap: 10px; }
        input { background: #111; border: 1px solid #00ff41; color: #00ff41; padding: 12px; font-size: 18px; }
        button { background: #00ff41; color: #000; border: none; padding: 15px; font-weight: bold; font-size: 16px; cursor: pointer; }
        .stat { color: #fff; font-weight: bold; }
        .residue { color: #00bfff; }
        .shell { color: #ff8c00; }
    </style>
</head>
<body>
    <div style="border-bottom: 1px solid #00ff41; margin-bottom: 10px;">PHASE-SHIFT NAVIGATOR v4.0</div>
    <div id="output">SYSTEM STANDBY...</div>
    <div class="input-group">
        <input type="number" id="target" placeholder="Enter N (e.g., 1729)" inputmode="numeric">
        <button onclick="calculate()">ANALYZE PHASE (8q + r)</button>
    </div>

<script>
function log(msg) {
    const out = document.getElementById('output');
    out.innerHTML += msg + "<br>";
    out.scrollTop = out.scrollHeight;
}

function calculate() {
    const val = document.getElementById('target').value;
    if(!val) return;
    const N = BigInt(val);
    document.getElementById('output').innerHTML = "";

    // 1. ANCHOR & GAP
    const root = BigInt(Math.ceil(Math.sqrt(Number(N))));
    const S = root * root;
    const G = S - N;
    log(`ANCHOR: <span class="stat">${root}Â² (${S})</span>`);
    log(`GAP (G): <span class="stat">${G}</span>`);

    // 2. SHELL DECOMPOSITION (8q + r)
    const q = G / 8n;
    const r = G % 8n;
    log(`-------------------------------`);
    log(`PHASE SPLIT: <span class="shell">8(${q})</span> + <span class="residue">${r}</span>`);
    log(`8-Shells (q): <span class="shell">${q}</span>`);
    log(`Road Residue (r): <span class="residue">${r}</span>`);

    // 3. PIVOT ADAPTATION
    const k = (G + 1n) / 2n;
    log(`PIVOT (k): <span class="stat">${k}${ (G + 1n) % 2n === 0n ? '' : '.5' }</span>`);
    log(`-------------------------------`);

    // 4. THE ROAD SCAN
    let road = 3n; // Start checking from Road 3
    let step = 0;
    
    while (road * road <= N) {
        if (N % road === 0n) {
            log(`[!] SNAP! Road <span class="residue">${road}</span> Found.`);
            log(`CALCULATION: ${road} x ${N/road}`);
            return;
        }
        
        // Match residue logic to output
        if (road % 8n === r || (r === 0n && road % 8n === 3n)) {
            log(`Residue Match: Road ${road} aligns with Phase ${r}`);
        }

        road += 4n;
        step++;
        if(step > 1000) break; // Safety
    }
}
</script>
</body>
</html>
