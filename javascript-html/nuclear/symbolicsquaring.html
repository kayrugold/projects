<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Symbolic Expander</title>
<style>
    body { background: #050505; color: #0f0; font-family: 'Courier New', monospace; padding: 20px; }
    .card { border: 1px solid #333; padding: 20px; max-width: 800px; margin: 0 auto; }
    h1 { margin: 0 0 20px 0; color: #fff; font-size: 1.4rem; border-bottom: 1px solid #333; padding-bottom: 10px; }
    
    .output { background: #111; padding: 15px; border-radius: 4px; border: 1px solid #333; margin-top: 20px; min-height: 200px; white-space: pre-wrap; font-size: 12px; color: #ccc; }
    .hl { color: #ff0; font-weight: bold; }
    .term { color: #0f0; }
    
    button { padding: 15px; width: 100%; background: #222; border: 1px solid #444; color: #fff; font-weight: bold; cursor: pointer; margin-top: 10px; }
    button:hover { background: #333; }
</style>
</head>
<body>

<div class="card">
    <h1>Symbolic Polynomial Expander</h1>
    <div style="color:#888; font-size:12px; margin-bottom:15px;">
        Target: (H + 61)^2^k
    </div>
    <button onclick="runExpansion()">Run Symbolic Squaring</button>
    <div id="out" class="output"></div>
</div>

<script>
function log(msg) {
    const d = document.getElementById('out');
    d.innerHTML += msg + "\n";
}

function runExpansion() {
    document.getElementById('out').innerHTML = "";
    
    // We are tracking the value: A*H + B
    // Initial State for 10^E + 61 is: 1*H + 61
    
    let A = 1n;
    let B = 61n;
    const Reduction = -61n; // H = -61
    
    log("INITIAL STATE:");
    log(`<span class='term'>${A}</span> H + <span class='term'>${B}</span>`);
    log("--------------------------------");

    // Run first 5 steps to see the explosion
    for(let i=1; i<=10; i++) {
        log(`\nSTEP ${i} (Squaring):`);
        
        // The Algebra: (AH + B)^2 = A^2 H^2 + 2AB H + B^2
        // Substitute H^2 = H * H = H * (-61) = -61H
        // So: A^2(-61H) + 2AB H + B^2
        // Group H terms: (2AB - 61A^2) H + B^2
        
        const A_sq = A * A;
        const B_sq = B * B;
        const AB_2 = 2n * A * B;
        
        // Apply Reduction H^2 -> -61H
        const term_H = AB_2 + (A_sq * Reduction);
        const term_1 = B_sq; // Constant term
        
        // New State
        A = term_H;
        B = term_1;
        
        // Format for readability
        let aStr = A.toString();
        let bStr = B.toString();
        
        // Show "Simple Form" while small, shorten if huge
        if(aStr.length > 20) aStr = aStr.substring(0, 10) + "..." + aStr.slice(-5) + ` [${aStr.length} digits]`;
        if(bStr.length > 20) bStr = bStr.substring(0, 10) + "..." + bStr.slice(-5) + ` [${bStr.length} digits]`;
        
        log(`H-Term (A): <span class='hl'>${aStr}</span>`);
        log(`Const  (B): <span class='hl'>${bStr}</span>`);
        
        // Check size
        if(A.toString().length > 1000) {
            log(`\n[STOPPING DISPLAY: Coefficients crossed 1,000 digits]`);
            break;
        }
    }
}
</script>
</body>
</html>
