<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometric Zipper</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Courier New', monospace; overflow: hidden; }
        .block { transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

const App = () => {
    const [n, setN] = React.useState(11); // Matches user's 11x11 grid
    const [isZipped, setIsZipped] = React.useState(false);

    // Calculate stats
    const blackBlocks = (n * (n + 1)) / 2;
    const whiteBlocks = (n * (n - 1)) / 2;
    const totalBlocks = n * n;

    // Render the grid
    const renderGrid = () => {
        let items = [];
        
        // We need a canvas large enough to hold the "Unzipped" state
        // Unzipped: Two triangles side-by-side or offset?
        // Let's do the "Slide In" effect.
        // The Black Triangle stays put. The White Triangle slides in from the top-right.
        
        for (let y = 0; y < n; y++) {
            for (let x = 0; x < n; x++) {
                
                // Logic for the Black Triangle (Lower Left)
                // x <= y (if 0,0 is top left) -> No, user drew 0,0 as bottom left?
                // Let's assume standard matrix: y is row index (0 top), x is col (0 left).
                // Staircase: Row 0 has 1 block? Row n-1 has n blocks.
                // So condition: x <= y
                
                const isBlack = x <= y;
                
                if (isBlack) {
                    // STATIC BLACK TRIANGLE
                    items.push(
                        <div 
                            key={`b-${x}-${y}`}
                            className="absolute w-6 h-6 bg-slate-900 border border-slate-700 flex items-center justify-center text-[8px] text-slate-600"
                            style={{
                                left: x * 26,
                                top: y * 26,
                            }}
                        >
                            B
                        </div>
                    );
                }
            }
        }

        // THE WHITE TRIANGLE (The Ghost)
        // It fills the gap where x > y.
        // We want to animate this group.
        
        for (let y = 0; y < n; y++) {
            for (let x = 0; x < n; x++) {
                const isWhite = x > y;
                
                if (isWhite) {
                    // Calculate "Unzipped" Position
                    // Let's move it 50px up and 50px right when unzipped
                    const offsetX = isZipped ? 0 : 60;
                    const offsetY = isZipped ? 0 : -60;
                    const opacity = isZipped ? 1 : 0.6;
                    const color = isZipped ? 'bg-blue-600' : 'bg-blue-500';
                    
                    items.push(
                        <div 
                            key={`w-${x}-${y}`}
                            className={`absolute w-6 h-6 border border-blue-400 flex items-center justify-center text-[8px] text-white block ${color}`}
                            style={{
                                left: x * 26,
                                top: y * 26,
                                transform: `translate(${offsetX}px, ${offsetY}px)`,
                                opacity: opacity
                            }}
                        >
                            W
                        </div>
                    );
                }
            }
        }

        return items;
    };

    return (
        <div className="min-h-screen flex flex-col items-center justify-center bg-slate-950 p-4">
            
            <div className="text-center mb-12">
                <h1 className="text-3xl font-bold text-white mb-2">GEOMETRIC <span className="text-blue-500">ZIPPER</span></h1>
                <p className="text-xs text-slate-400">Proving 11² = T₁₁ + T₁₀</p>
            </div>

            <div className="flex flex-col md:flex-row items-center gap-16">
                
                {/* VISUALIZER */}
                <div className="relative bg-slate-900/50 rounded-xl border-2 border-dashed border-slate-800"
                     style={{ width: n * 26 + 80, height: n * 26 + 80 }}
                >
                    <div className="absolute left-10 top-10">
                         {renderGrid()}
                    </div>
                    
                    {/* The Blue Bracket (Simulated) */}
                    <div className={`absolute bottom-10 right-10 border-r-4 border-b-4 border-blue-500 transition-all duration-500 ${isZipped ? 'opacity-100 w-[286px] h-[286px]' : 'opacity-0 w-[300px] h-[300px]'}`}></div>
                </div>

                {/* CONTROLS */}
                <div className="w-64 space-y-6">
                    
                    <div className="space-y-2">
                        <div className="flex justify-between text-sm">
                            <span className="text-slate-500">Black Staircase</span>
                            <span className="font-bold text-white">{blackBlocks}</span>
                        </div>
                        <div className="flex justify-between text-sm">
                            <span className="text-blue-400">Blue Staircase</span>
                            <span className="font-bold text-blue-400">{whiteBlocks}</span>
                        </div>
                        <div className="h-px bg-slate-700 my-2"></div>
                        <div className="flex justify-between text-xl font-bold">
                            <span className="text-white">Square</span>
                            <span className="text-yellow-500">{totalBlocks}</span>
                        </div>
                    </div>

                    <button 
                        onClick={() => setIsZipped(!isZipped)}
                        className={`w-full py-4 rounded-xl font-bold text-lg transition-all shadow-xl ${isZipped ? 'bg-slate-800 text-slate-300' : 'bg-blue-600 hover:bg-blue-500 text-white'}`}
                    >
                        {isZipped ? "UNZIP" : "ZIP IT UP!"}
                    </button>
                    
                    <div className="pt-4">
                        <label className="text-[10px] uppercase font-bold text-slate-500">Grid Size (N)</label>
                        <input 
                            type="range" min="3" max="15" value={n} 
                            onChange={(e) => { setN(parseInt(e.target.value)); setIsZipped(false); }}
                            className="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-blue-500 mt-2"
                        />
                        <div className="text-right text-xs text-slate-400 mt-1">Current: {n}x{n}</div>
                    </div>

                </div>
            </div>

        </div>
    );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);

</script>
</body>
</html>

