<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The 6k Prime Spine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Courier New', monospace; }
        .spine-glow { box-shadow: 0 0 15px #fbbf24; z-index: 50; }
        .cell { transition: all 0.3s ease; }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

const App = () => {
    const [layerCount, setLayerCount] = React.useState(13); // Go up to 25 (Layer 13) to show 24 boundary

    // Math Logic
    const isPrime = (num) => {
        if (num <= 1) return false;
        if (num <= 3) return true;
        if (num % 2 === 0 || num % 3 === 0) return false;
        for (let i = 5; i * i <= num; i += 6) {
            if (num % i === 0 || num % (i + 2) === 0) return false;
        }
        return true;
    };

    // Generate Layers
    const layers = React.useMemo(() => {
        let data = [];
        for (let i = 1; i <= layerCount; i++) {
            const blocks = 2 * i - 1;
            
            // Check relation to 6k
            // The boundary AFTER this layer is 2*i. Is 2*i a multiple of 6?
            // No, the boundary is the "phantom even number" between layers.
            // Layer 3 (5) | Boundary (6) | Layer 4 (7)
            // Layer i (blocks). The number AFTER it is blocks + 1.
            
            data.push({
                layerIndex: i,
                blocks: blocks,
                isPrime: isPrime(blocks),
                // Is this layer touching a 6k boundary?
                // If i % 3 === 0, then blocks = 6k - 1 (e.g., Layer 3 -> 5)
                // If i % 3 === 1, then blocks = 6k + 1 (e.g., Layer 4 -> 7)
                isBelow6k: (i % 3 === 0),
                isAbove6k: (i % 3 === 1)
            });
        }
        return data;
    }, [layerCount]);

    const renderGrid = () => {
        let cells = [];
        const gridSize = layerCount;

        for (let y = 0; y < gridSize; y++) {
            for (let x = 0; x < gridSize; x++) {
                // Determine Layer
                const layerIndex = Math.max(x, y) + 1;
                const layerInfo = layers[layerIndex - 1];
                
                let bg = "bg-slate-800";
                let border = "border-slate-900";
                let content = null;

                // 1. Prime Coloring
                if (layerInfo.isPrime) {
                    bg = "bg-blue-600";
                    border = "border-blue-500";
                } else {
                    bg = "bg-slate-800"; // Fade out composites
                    border = "border-slate-800";
                }

                // 2. The 6k SPINE (Gold Line)
                // The Spine exists betwen Layer 3k and 3k+1.
                // Visually, if this cell is in Layer 3k+1, its Top/Left border is the spine.
                
                const isSpineLayer = (layerIndex % 3 === 1 && layerIndex > 1); 
                // e.g., Layer 4 (7). Its inner border is 6.
                
                let style = {};
                
                if (isSpineLayer) {
                    // We are the layer just OUTSIDE the spine (e.g., 7, 13, 19)
                    // Draw the Gold Line on our inner edge
                    const isInnerEdge = (x === layerIndex-1 && y < layerIndex) || (y === layerIndex-1 && x < layerIndex);
                    
                    if (isInnerEdge) {
                         // Actually, simpler to draw border on the inner edge
                         // Use boxShadow to simulate the line
                         style = {
                             boxShadow: "-2px -2px 0px 1px #fbbf24", // Gold line inset
                             zIndex: 20
                         };
                    }
                }

                // Add Number Labels to diagonal for clarity
                if (x === y) {
                    content = <span className="text-[8px] text-white/50">{layerInfo.blocks}</span>;
                    
                    // Label the spine value?
                    if (isSpineLayer) {
                         // The spine value is blocks - 1 (e.g. 7 - 1 = 6)
                         content = (
                            <div className="relative">
                                <span className="text-[8px] opacity-30">{layerInfo.blocks}</span>
                                <div className="absolute -top-4 -left-4 bg-yellow-500 text-black font-bold rounded px-1 text-[8px] z-50">
                                    {layerInfo.blocks - 1}
                                </div>
                            </div>
                         )
                    }
                }

                cells.push(
                    <div 
                        key={`${x}-${y}`}
                        className={`cell w-full h-full border ${border} ${bg} flex items-center justify-center relative`}
                        style={style}
                    >
                        {content}
                    </div>
                );
            }
        }
        return cells;
    };

    return (
        <div className="min-h-screen flex flex-col items-center justify-center p-4 bg-slate-950">
            
            <div className="mb-8 text-center space-y-2">
                <h1 className="text-2xl font-bold tracking-wider text-white">THE <span className="text-yellow-400">6k SPINE</span></h1>
                <p className="text-xs text-slate-400">Visualizing Primes as Neighbors of Multiples of 6</p>
            </div>

            <div className="flex flex-col md:flex-row items-start gap-8">
                
                {/* Grid Visual */}
                <div className="relative bg-slate-900 p-8 rounded-xl border border-slate-800 shadow-2xl">
                    <div 
                        className="grid"
                        style={{
                            gridTemplateColumns: `repeat(${layerCount}, minmax(0, 1fr))`,
                            width: 'min(85vw, 400px)',
                            height: 'min(85vw, 400px)'
                        }}
                    >
                        {renderGrid()}
                    </div>
                </div>

                {/* Legend & Explanation */}
                <div className="w-full max-w-xs space-y-6">
                    
                    <div className="bg-slate-900 p-4 rounded border-l-4 border-yellow-400">
                        <h3 className="text-yellow-400 font-bold text-sm mb-2">THE GOLD LINES</h3>
                        <p className="text-xs text-slate-400 leading-relaxed">
                            These lines represent Multiples of 6 (6, 12, 18, 24...).
                            Notice how they form a rigid structure every 3 layers.
                        </p>
                    </div>

                    <div className="bg-slate-900 p-4 rounded border-l-4 border-blue-500">
                        <h3 className="text-blue-400 font-bold text-sm mb-2">THE PRIME HUG</h3>
                        <p className="text-xs text-slate-400 leading-relaxed">
                            Notice how the <span className="text-blue-400 font-bold">Blue Blocks</span> (Primes) are always touching a Gold Line.
                        </p>
                        <ul className="mt-2 space-y-1 text-[10px] text-slate-500 font-mono">
                            <li>5 & 7 hug 6</li>
                            <li>11 & 13 hug 12</li>
                            <li>17 & 19 hug 18</li>
                            <li>23 & 25 hug 24</li>
                        </ul>
                    </div>

                    <div>
                         <label className="text-[10px] uppercase font-bold text-slate-500">Zoom Grid</label>
                         <input 
                            type="range" min="4" max="20" value={layerCount} 
                            onChange={(e) => setLayerCount(parseInt(e.target.value))}
                            className="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-yellow-400 mt-2"
                        />
                    </div>

                </div>
            </div>
        </div>
    );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);

</script>
</body>
</html>

