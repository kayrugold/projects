<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Holographic Index Ruler</title>
<style>
  body { background: #0f172a; color: #e2e8f0; font-family: 'Courier New', monospace; padding: 20px; display: flex; flex-direction: column; align-items: center; }
  h2 { color: #f43f5e; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px; }
  p { color: #94a3b8; font-size: 0.9rem; max-width: 600px; text-align: center; margin-bottom: 30px; }
  
  .legend { display: flex; gap: 20px; margin-bottom: 20px; font-size: 0.8rem; }
  .dot { width: 10px; height: 10px; display: inline-block; border-radius: 50%; margin-right: 5px; }
  
  svg { background: #1e293b; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); border: 1px solid #334155; }
  
  /* Animations */
  .wave-3 { animation: pulse 2s infinite; }
  .wave-5 { animation: pulse 3s infinite; }
  .wave-7 { animation: pulse 4s infinite; }
  
  @keyframes pulse {
    0% { opacity: 0.6; r: 4; }
    50% { opacity: 1; r: 6; }
    100% { opacity: 0.6; r: 4; }
  }
</style>
</head>
<body>

<h2>The Holographic Ruler</h2>
<p>Visualizing the "Inverse of 2" Stride Pattern<br>Index I = (Rim + 1) / 2</p>

<div class="legend">
  <div><span class="dot" style="background:#f43f5e"></span>3-Family (Start 5, Step 3)</div>
  <div><span class="dot" style="background:#3b82f6"></span>5-Family (Start 13, Step 5)</div>
  <div><span class="dot" style="background:#22c55e"></span>7-Family (Start 25, Step 7)</div>
</div>

<svg width="800" height="400" viewBox="0 0 800 400">
  <defs>
    <pattern id="grid" width="20" height="400" patternUnits="userSpaceOnUse">
      <line x1="19.5" y1="0" x2="19.5" y2="400" stroke="#334155" stroke-width="1" />
    </pattern>
  </defs>
  <rect width="800" height="400" fill="url(#grid)" />

  <text x="10" y="30" fill="#64748b" font-size="12">INDEX (I)</text>
  <text x="10" y="100" fill="#f43f5e" font-size="12">3-STRIDE</text>
  <text x="10" y="160" fill="#3b82f6" font-size="12">5-STRIDE</text>
  <text x="10" y="220" fill="#22c55e" font-size="12">7-STRIDE</text>
  <text x="10" y="320" fill="#e2e8f0" font-size="14" font-weight="bold">RESULT (SIEVE)</text>

  <script>
    const svg = document.querySelector('svg');
    const scale = 20; // pixels per index unit
    const maxIndex = 38; 
    
    const primeHits = new Array(maxIndex + 1).fill(0); // 0 = Prime, 1 = Composite

    function drawTick(i) {
      const x = i * scale + 40;
      // Top Ruler Number
      const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
      text.setAttribute("x", x);
      text.setAttribute("y", 30);
      text.setAttribute("text-anchor", "middle");
      text.setAttribute("fill", "#94a3b8");
      text.setAttribute("font-size", "10");
      text.textContent = i;
      svg.appendChild(text);
      
      // Bottom Sieve Box Placeholder
      const box = document.createElementNS("http://www.w3.org/2000/svg", "rect");
      box.setAttribute("x", x - 8);
      box.setAttribute("y", 300);
      box.setAttribute("width", 16);
      box.setAttribute("height", 30);
      box.setAttribute("rx", 4);
      box.setAttribute("id", "res-" + i);
      box.setAttribute("fill", "#1e293b"); // Default dark
      box.setAttribute("stroke", "#475569");
      svg.appendChild(box);
    }

    function drawStride(p, color, rowY, cssClass) {
      // Start Index = (p^2 + 1) / 2
      const start = (p*p + 1) / 2;
      
      // Draw Line
      const pathStr = `M ${start * scale + 40} ${rowY} L ${maxIndex * scale + 40} ${rowY}`;
      const line = document.createElementNS("http://www.w3.org/2000/svg", "path");
      line.setAttribute("d", pathStr);
      line.setAttribute("stroke", color);
      line.setAttribute("stroke-width", "2");
      line.setAttribute("opacity", "0.3");
      svg.appendChild(line);

      for (let i = start; i <= maxIndex; i += p) {
        // Draw Dot
        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circle.setAttribute("cx", i * scale + 40);
        circle.setAttribute("cy", rowY);
        circle.setAttribute("r", 5);
        circle.setAttribute("fill", color);
        circle.setAttribute("class", cssClass);
        svg.appendChild(circle);
        
        // Mark interference
        primeHits[i] = 1;
        
        // Draw Connector Line down to result
        const conn = document.createElementNS("http://www.w3.org/2000/svg", "line");
        conn.setAttribute("x1", i * scale + 40);
        conn.setAttribute("y1", rowY + 5);
        conn.setAttribute("x2", i * scale + 40);
        conn.setAttribute("y2", 300);
        conn.setAttribute("stroke", color);
        conn.setAttribute("stroke-width", "1");
        conn.setAttribute("opacity", "0.2");
        conn.setAttribute("stroke-dasharray", "2,2");
        svg.appendChild(conn);
      }
    }

    // Initialize Ruler
    for(let i=1; i<=maxIndex; i++) drawTick(i);

    // Draw Waves
    drawStride(3, "#f43f5e", 100, "wave-3");
    drawStride(5, "#3b82f6", 160, "wave-5");
    drawStride(7, "#22c55e", 220, "wave-7");

    // Color the Result Bar
    for(let i=1; i<=maxIndex; i++) {
      const box = document.getElementById("res-" + i);
      const oddNum = 2 * i - 1; // The Rim Value
      
      // We start marking composites from Index 5 (Rim 9) because 1, 2, 3, 4 map to 1, 3, 5, 7 (Primes/Unit)
      // Actually, Index 1=1 (Unit), Index 2=3 (Prime), Index 3=5 (Prime), Index 4=7 (Prime).
      // Index 5=9 (Composite).
      
      if (primeHits[i] === 1) {
         box.setAttribute("fill", "#000"); // Black for Composite
         // Label the Rim
         const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
         t.setAttribute("x", i * scale + 40);
         t.setAttribute("y", 350);
         t.setAttribute("text-anchor", "middle");
         t.setAttribute("fill", "#475569");
         t.setAttribute("font-size", "9");
         t.textContent = oddNum;
         svg.appendChild(t);
      } else {
         box.setAttribute("fill", "#fff"); // White for Prime
         box.setAttribute("stroke", "#fff");
         // Label the Rim Bold
         const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
         t.setAttribute("x", i * scale + 40);
         t.setAttribute("y", 350);
         t.setAttribute("text-anchor", "middle");
         t.setAttribute("fill", "#fff");
         t.setAttribute("font-weight", "bold");
         t.setAttribute("font-size", "10");
         t.textContent = oddNum;
         svg.appendChild(t);
      }
    }
  </script>
</svg>

</body>
</html>
